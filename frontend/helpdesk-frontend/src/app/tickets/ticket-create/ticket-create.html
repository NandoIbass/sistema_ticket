<div class="max-w-2xl mx-auto p-8 bg-white rounded-lg shadow">
  <h1 class="text-3xl font-bold mb-6 text-center">Crear Nuevo Ticket</h1>

  <form [formGroup]="ticketForm" (ngSubmit)="onSubmit()" class="space-y-5">
    <!-- Título -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Título</label>
      <input
        formControlName="title"
        type="text"
        placeholder="Ej: Error en el login"
        class="w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200"
      />
      <p *ngIf="ticketForm.get('title')?.invalid && ticketForm.get('title')?.touched"
         class="text-red-500 text-sm mt-1">El título es obligatorio (mínimo 3 caracteres).</p>
    </div>

    <!-- Descripción -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Descripción</label>
      <textarea
        formControlName="description"
        rows="4"
        placeholder="Describe el problema o solicitud..."
        class="w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200"
      ></textarea>
      <p *ngIf="ticketForm.get('description')?.invalid && ticketForm.get('description')?.touched"
         class="text-red-500 text-sm mt-1">La descripción es obligatoria.</p>
    </div>

    <!-- Prioridad -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Prioridad</label>
      <select
        formControlName="priority"
        class="w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200"
      >
        <option value="">Seleccione prioridad</option>
        <option *ngFor="let p of priorities">{{ p }}</option>
      </select>
      <p *ngIf="ticketForm.get('priority')?.invalid && ticketForm.get('priority')?.touched"
         class="text-red-500 text-sm mt-1">Seleccione una prioridad.</p>
    </div>

    <!-- Usuario asignado -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Usuario asignado</label>
      <input
        formControlName="assignedUser"
        type="text"
        placeholder="Ej: juan.perez"
        class="w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200"
      />
      <p *ngIf="ticketForm.get('assignedUser')?.invalid && ticketForm.get('assignedUser')?.touched"
         class="text-red-500 text-sm mt-1">Debe indicar un usuario asignado.</p>
    </div>

    <!-- Mensajes -->
    <div *ngIf="successMsg" class="p-3 bg-green-100 text-green-800 rounded">{{ successMsg }}</div>
    <div *ngIf="errorMsg" class="p-3 bg-red-100 text-red-800 rounded">{{ errorMsg }}</div>

    <!-- Botones -->
    <div class="flex justify-end gap-3">
      <button
        type="button"
        (click)="cancel()"
        class="px-4 py-2 border border-gray-400 rounded hover:bg-gray-100"
      >
        Cancelar
      </button>
      <button
        type="submit"
        [disabled]="loading"
        class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50"
      >
        {{ loading ? 'Guardando...' : 'Guardar Ticket' }}
      </button>
    </div>
  </form>
</div>